


ðŸ³ï¸â€âš ï¸  RUNTIME BUG: â€œCannot access 'R' before initializationâ€
=============================================================
Rollup/Vite throws this when there is a circular ES-module import.  
We also see 404s for `/logo.svg` and `/stock_photos_placeholder`.

GOALS (single commit)
---------------------
1.  Find & break the circular import so React mounts.
2.  Add sourcemaps + a `madge` script for future detection.
3.  Serve static assets from `/public/assets` and update paths.
4.  Add a default `/public/robots.txt`.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STEP 1 Â· enable source-maps & madge
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ðŸ”¸ **vite.config.js**

```diff
 export default defineConfig({
   plugins:[react()],
-  base:'/',
+  base:'/',
+  build:{ sourcemap:true }
 });

ðŸ”¸ package.json

 "dev":"vite",
 "build":"vite build",
+ "lint:circles":"madge --circular src || echo No circular deps"

Add dev-dependency:

npm i -D madge

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STEP 2 Â· locate the circular pair
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
	1.	Run: npm run lint:circles
Expect something like
Circular dependencies: HomePage.jsx -> sections/index.js -> HomePage.jsx
	2.	Open those files.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STEP 3 Â· break the circle (example fix)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Before

// HomePage.jsx
import { Hero } from './sections';
...
export const PageContext = createContext();  // <-- export AND define here

// sections/index.js
export { default as Hero } from './Hero';
import { PageContext } from '../HomePage';   // <-- circular

After

// context/PageContext.js          <-- NEW
import { createContext } from 'react';
export const PageContext = createContext(null);

// HomePage.jsx
-import { Hero } from './sections';
-import { PageContext } from './HomePage';
+import { Hero } from './sections';
+import { PageContext } from '../context/PageContext';

// sections/index.js
-export { default as Hero } from './Hero';
-import { PageContext } from '../HomePage';
+export { default as Hero } from './Hero';

Remove all cross-imports between sections/index.js and page components.

Run npm run lint:circles again â€” should output â€œNo circular depsâ€.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STEP 4 Â· fix 404 assets
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
	1.	Move logo.svg to /public/assets/logo.svg.
	2.	Update imports/<img> to /assets/logo.svg (absolute path).
	3.	Replace "stock_photos_placeholder" with a real fallback in HomePageV1:

const safeImg = (url)=> url.includes('placeholder')
  ? '/assets/placeholder.jpg'
  : url;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STEP 5 Â· robots.txt
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Create /public/robots.txt:

User-agent: *
Allow: /
Sitemap: https://goaisite.com/sitemap.xml

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STEP 6 Â· test
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
	1.	npm run build  âžœ Should succeed, no Rollup errors.
	2.	Click Run âžœ Visit /preview?...
	3.	DevTools Console âžœ no red errors, React renders Kigen Plastika homepage.
	4.	Network âžœ /logo.svg and /placeholder.jpg return 200, not 404.

Make these edits in one commit.  Confirm npm run lint:circles passes and the page no longer white-screens.

---

Ask Ghostwriter to apply the steps; rebuild & run.  
You should land on `/preview` with your generated homepage instead of a blank screen.