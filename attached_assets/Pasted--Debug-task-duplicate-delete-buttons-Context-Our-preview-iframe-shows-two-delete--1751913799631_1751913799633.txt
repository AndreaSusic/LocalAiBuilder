

ğŸ”§  **Debug task â€“ duplicate delete buttons**

Context  
â€¢ Our preview iframe shows two delete â€œÃ—â€ icons on every editable nav item.  
â€¢ DOM snippet:  
  <li class="edit-hoverable" data-editable="true">
    â€¦<button class="delete-btn">Ã—</button>â€¦
    <button class="delete-btn">Ã—</button>
  </li>  
â€¢ Browser console proves that **both** `editorBridge.js` and `autoSaveEditor.js` are being injected.

Goal  
1. Find where the dashboard injects **each** of those two scripts.  
2. Make sure that **only one** (keep *editorBridge.js*, disable *autoSaveEditor.js* for now) is ever added to the iframe.  
3. Add a defensive guard so future hot-reloads donâ€™t accidentally inject a second editor.

Steps to execute (React code base):

1. Open `dashboard/src/components/DesktopDashboard.jsx` (or whichever file does the `<iframe src={â€¦}>` and script injection).  
2. Search for any code that calls `injectScript`, `appendChild(script)`, or `<script src="/editorBridge.js">` and `<script src="/autoSaveEditor.js">`.
3. Wrap the *autoSaveEditor* injection in a feature flag:

```jsx
// DesktopDashboard.jsx
if (!window.__singleEditorLoaded__) {
  injectScript(iframe, '/editorBridge.js');
  window.__singleEditorLoaded__ = true;
}

// ğŸ”¥ TEMPORARY DISABLE legacy auto-save editor
// injectScript(iframe, '/autoSaveEditor.js');

	4.	Add a console log before each injection so we can confirm at runtime:

console.log('ğŸ”§ Injecting editorBridge.js');
// â€¦
console.log('ğŸ”§ Injecting autoSaveEditor.js â€“ SHOULD NOW BE DISABLED');

	5.	Hot-reload, open the preview iframe, and verify in DevTools:
â€¢ Only one â€œğŸ”§ Injecting â€¦â€ message appears.
â€¢ Each editable element now has one <button class="delete-btn">Ã—</button>.
	6.	Commit as â€œfix: prevent double editor injection; guard with singleEditorLoadedâ€.

If DesktopDashboard.jsx does not inject autoSaveEditor, keep searching (use global search):

autoSaveEditor.js
injectScript(
appendChild(script

and apply the same flag there.

Stop when:
â€¢ No console error â€œautoSavePageId is not definedâ€ appears.
â€¢ Only a single delete button is present per editable node.

Return the diff of the file(s) you changed and a short note that double-injection is resolved.
